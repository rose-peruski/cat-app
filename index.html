<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type='text/javascript' src='config.js'></script>
<!-- <script type='text/javascript' src='main.js'></script> -->
  <script src="script.js"></script>
  
  <script src="https://www.gstatic.com/firebasejs/3.9.0/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.9.0/firebase-database.js"></script>
 <!-- <script src= 'images.js' type="text/javascript"></script> -->
<script>
  // Initialize Firebase

  var config = {
    apiKey: mykey,
    authDomain: "cat-translator-d282b.firebaseapp.com",
    databaseURL: myDatabase ,
    projectId: "cat-translator-d282b",
    storageBucket: myStorage ,
    messagingSenderId: "877874555995"
  };
  firebase.initializeApp(config);

  var ref = firebase.database().ref("translations/");
  var storage = firebase.storage();
 
 

// ref.on("value", function(snapshot) {
//               value = snapshot.val();
//               keyValues = Object.values(value);
//               var keyNames = Object.keys(value);
//               // console.log("ref value:" + value);
//               // console.log("key values: " + keyValues);
//               // console.log("key names: " + keyNames);
          
//               for (var i in keyNames) {
//                 document.getElementById('cat' + i).innerHTML = "<p>" + keyValues[i].cat + ": " + keyValues[i].english + "</p>";
//               }
//             })  ;


function chooser() {
  
  var randomNum = Math.floor(Math.random() * (count - 0)) + 1;
  randomNum=randomNum.toString();
  //randomNum="8";
  
  ref.orderByChild("num").equalTo(randomNum).on("child_added", function(data) {
   console.log("Equal to filter: " + data.val().num);
    // true
      var b = data.val().cat;
      var c = data.val().english; // true
      var d = data.val().img;
      
      console.log( "translation: " +b+ " "+c + "   "  );

      $(document).ready(function() {
      $('#cat-word').append("<p id='kitty-word'>" + b + "</p>");
      $('#english').append("<p>" + c + "</p>");
      $('#cat-pic').append("<img src='"+d+"'>");

    });
  // .once("value").then(function(snapshot) 
  // {
  //     var a = snapshot.exists();  // true
  //     var b = snapshot.child("cat").val();
  //     var c = snapshot.child("english").val(); 
  //     var d = snapshot.child("num").val(); 
  //     console.log(a + " " + b+ " "+c + " "+ d);
      
  //     $(document).ready(function() {
  //     $('#cat-word').append("<p id='kitty-word'>" + b + "</p>");
  //     $('#english').append("<p>" + c + "</p>")


  //   });

  });



}

function toggleSignIn() {
        if (firebase.auth().currentUser) {
          // [START signout]
          firebase.auth().signOut();
          // [END signout]
        } else {
          var email = document.getElementById('email').value;
          var password = document.getElementById('password').value;
          if (email.length < 4) {
            alert('Please enter an email address.');
            return;
          }
          if (password.length < 4) {
            alert('Please enter a password.');
            return;
          }
          // Sign in with email and pass.
          // [START authwithemail]
          firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // [START_EXCLUDE]
            if (errorCode === 'auth/wrong-password') {
              alert('Wrong password.');
            } else {
              alert(errorMessage);
            }
            console.log(error);
            document.getElementById('quickstart-sign-in').disabled = false;
            // [END_EXCLUDE]
          });
        // [END authwithemail]
        }
        document.getElementById('quickstart-sign-in').disabled = true;   
      }
      function initApp() {
        
        firebase.auth().signInAnonymously()
          .then(function() {
             console.log('Logged in as Anonymous!')
             }).catch(function(error) {
             var errorCode = error.code;
             var errorMessage = error.message;
             console.log(errorCode);
             console.log(errorMessage);
          });
        
      }
      window.onload = function() {
        initApp();
        chooser();
      };




</script>

  <link rel="stylesheet" type="text/css" href="style.css">

  <title>My Shakespearean Kitty</title>
  
</head>
<body>
  <!-- div for the cat pictures from api -->
  <div id="cat-pic">
 
    
  </div>
  <!-- image for thought bubble -->
  <div id = "cat-word">

    <img id = "bubble" src="images/bubble0.1.png">

  </div>
  
  <!-- div for translation -->
  
  <div id="english">Translation</div>
  <button id="more">More Kitties!</button>
  <!-- div for adding files -->
  <div>
    <button id="add">Add your own-coming soon!</button>
    
    <input type="text" id="userCat" placeholder = "Kitty Words">
    
    <input type="text" id="english-trans" placeholder = "English Translation">

    <button id="finish-add">Submit</button>

  </div>
    <div id="kitty-user"></div>
        <!-- <div id="cat0"></div>
        <div id="cat1"></div>
        <div id="cat2"></div>
        <div id="cat3"></div>
        <div id="cat4"></div>
        <div id="cat5"></div>
        <div id="cat6"></div>
        <div id="cat7"></div>
        <div id="cat8"></div>
        <div id="cat9"></div> -->
        

</body>
</html>